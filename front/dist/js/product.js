(()=>{const e=window.location.href,t=new URL(e).searchParams.get("id");let n;const o=document.querySelector("title"),c=document.getElementById("title"),r=document.getElementById("price"),a=document.getElementById("description"),d=document.querySelector("select"),l=document.querySelector("#quantity");fetch("https://kanap-api-back.herokuapp.com/api/products").then((e=>e.json())).then((e=>{for(Element of e)Element._id===t&&(n=Element)})).then((()=>{o.textContent=n.name,c.textContent=n.name,r.textContent=n.price,a.textContent=n.description,n.colors.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,d.appendChild(t)}))})).catch((e=>function(e){console.dir(e);const t=document.querySelector(".item"),n=document.createElement("p").textContent=e.message;t.innerHTML=n}(e))),document.querySelector("#addToCart").addEventListener("click",(async()=>{if(""!==d.value){l.value++;let e={product_id:t,product_quantity:l.value,product_color:d.value};parsedItemToAdd=JSON.stringify(e),await localStorage.setItem(n.name+" "+d.value,parsedItemToAdd)}else alert("Veuillez choisir une couleur pour votre produit")})),d.addEventListener("change",(()=>l.value=0))})();